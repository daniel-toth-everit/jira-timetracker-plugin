$webResourceManager.requireResource("jira.webresources:dwr", null)   
$webResourceManager.requireResource("jira.webresources:ajax-preview", null)
<style type="text/css">
	. grid td {
		text-align: center;
		vertical-align: inherit;
	}
	.rowHeader {
        background-color:#E2E2E2;
    }
    .rowAlter {
        background-color:#F2F2F2;
    }
    .button {
        padding: 2px;
    }
    .grid {
        font-family:Arial,Helvetica,sans-serif;
        font-size:12px;
        background-color:#FCFCFC;
        border:1px solid #D2D2D2;
        border-collapse:collapse;
    }
    .grid th, .grid td {
        border:1px solid #D2D2D2;   
        padding:4px;
    }
{
margin-bottom: 0em;
}
.table-endtime:hover, .table-starttime:hover, .table-issue:hover, .table-comment:hover{
cursor:pointer;
}
</style>
<div class="results-wrap">
	<div>
		#set($tableCount = 0)
		#foreach ($key in $allWorklogsMap.keySet())
			#set($worklogs=$allWorklogsMap.get($key))
			<h3>$key</h3>
		    <table class="grid" border="0" cellpadding="2" cellspacing="0" width="100%">
		              <thead>
		                   <tr class="rowHeader">
		                       <td width="10%" style="text-align: center;">
		                           Issue
		                        </td>
		                        <td width="5%" style="text-align: center;">
		                           $i18n.getText("plugin.start")
		                        </td>
		                        <td width="5%" style="text-align: center;">
		                           $i18n.getText("plugin.end")
		                        </td>
		                        <td width="5%" style="text-align: center;"> 
		                          $i18n.getText("plugin.duration")
		                        </td>
		                        <td width="65%" style="text-align: center;">
		                          $i18n.getText("plugin.note")
		                        </td>
		                    </tr>
	                    </thead>
	                    #if($worklogs.size() == 0)
	            			</table>
	            			<div id="message" style="text-align: center; padding: 3px; font-size: 14px;">
					 			$i18n.getText("plugin.no.worklogs")
						  	</div>
	                    #else
	                    	<tbody id="issueTable">
	                    			#set($rowCount = 0)
				                   	#foreach ($worklog in $worklogs)
				                    	<tr #if($rowCount % 2 != 0) class="rowAlter" #end>
				                    	 	<td class="table-issue" style="vertical-align: middle;">
				                    	 		<a href="/browse/$worklog.issue" class="issue-link" title="#if($worklog.issueParent != '') $i18n.getText('plugin.parent.issue') $worklog.issueParent &#13 $worklog.issueSummary #else $worklog.issueSummary #end">$worklog.issue</a>
				                    	 		
				                    	 		#if(!$worklog.isMoreEstimatedTime)
				                    	 			<img id="no_estimated" src="$contextPath/images/icons/priority_blocker.gif" width="16" height="16" border="0"
																	alt="$i18n.getText('plugin.exclamation.mark.message')" style="vertical-align: text-bottom;" title="$i18n.getText('plugin.exclamation.mark.message')"/>
												#end
				                    	 	</td>
				                    	 	<td class="table-starttime" style="vertical-align: middle;">
				                    	 		$worklog.startTime
				                    	 	</td>
				                    	 	<td class="table-endtime" style="vertical-align: middle;">
				                    	 		$worklog.endTime
				                    	 	</td>
				                    	 	<td style="vertical-align: middle;">
				                    	 		$worklog.duration
				                    	 	</td>
				                    	 	#set($commentRowName = "commentRow_" + $rowCount +"_" + $tableCount)
				                    	 	<td id="$commentRowName" name="$commentRowName" class="table-comment wiki-edit-content" style="vertical-align: middle;">
				                    	 		<input id="hiddenWorklogBody" type="hidden" value="$worklog.body">
				                    	 	</td>
				                    	 	<script>
						                    	 		jQuery.ajax({
						                    	 			url:  "${req.contextPath}/rest/api/1.0/render",
			                								contentType: "application/json",
			                								type:'POST',
			                								data: JSON.stringify({
			                    								rendererType: "atlassian-wiki-renderer",
			                    								unrenderedMarkup: "$worklog.body"
			                								}),
			                								dataType: "text",
			                								success: function(data){
			                								data = data.replace('<p>','');
			                								data = data.replace('</p>','');
					                    	 				AJS.$("#$commentRowName").append(data);
					                    	 				AJS.$("#$commentRowName").attr("style","vertical-align: middle;");
					                    	 			}
			            								}); 
			            					</script>
				                    	</tr>
				                    	#set($rowCount = $rowCount + 1)
			                    #end
			                    <tr class="rowHeader">
			                    	<td style="vertical-align: middle;" colspan="5">
				                    	 	 $i18n.getText("plugin.day"): $daysRealWorklogSummary.get($key) --  $tableCount : $rowCount : $commentRowName
				                    </td>
			                    </tr>
			                </tbody>
			            </table>
			            #end
			            #set($tableCount = $tableCount + 1)
		           #end
		        </div>
		    </div>